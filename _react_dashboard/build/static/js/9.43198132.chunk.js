(this["webpackJsonpmodaz-shop"]=this["webpackJsonpmodaz-shop"]||[]).push([[9],{1056:function(e,t,a){},1057:function(e,t,a){},1058:function(e,t,a){},1133:function(e,t,a){"use strict";a.r(t);var s=a(55),c=a(56),r=a(7),i=a(1),n=a(75),l=a(19),o=a(157),d=a(346),b=a(1053),u=a.n(b),j=a(1054),m=a.n(j),g=a(23),h=a(57),O=a(333),x=a(1055),v=a(117),p=a(417),f=a(119),N=a(120),C=a(231),w=a(94),y=a(539),S=a(172),T=a(173),R=a(1097),k=a(321),P=a(322),E=a(110),I=a(1129),z=a(51),B=a(202),F=(a(1056),a(1057),a(108),a(1058),a(3)),L=function(e){var t=e.slug,a=e.title,s=e.status,c=e.setSlug,r=e.content,n=e.history,l=e.dispatch,o=e.resetImg,d=e.onSubmit,b=e.setTitle,u=e.setStatus,j=e.setContent,m=e.formErrors,g=e.previewImg,O=e.categories,L=e.selectedPost,A=e.onFileChange,D=e.isSubmitting,M=e.postCategories,U=e.handleFormReset,q=e.setPostToManage,H=e.setBlogCategories;Object(i.useEffect)((function(){null!==m&&void 0!==m&&m.message&&window.scrollTo({top:0,left:0,behavior:"smooth"})}),[m]);return Object(F.jsx)(f.a,{className:"container",children:Object(F.jsxs)(N.a,{children:[Object(F.jsx)("div",{children:null!==m&&void 0!==m&&m.message?Object(F.jsx)(C.a,{color:"danger",children:Object(F.jsxs)("div",{className:"alert-body",children:[Object(F.jsx)(p.a,{size:15}),Object(F.jsx)("span",{className:"ml-1",children:m.message})]})}):Object(F.jsx)(w.a,{className:"d-flex mb-1",color:"muted",children:Object(F.jsxs)("div",{className:"ml-auto",children:["[",Object(F.jsx)("span",{className:"text-danger",children:" * "}),"] Champs obligatoires"]})})}),Object(F.jsx)(y.a,{className:"mt-2",onSubmit:d,children:Object(F.jsxs)(S.a,{children:[Object(F.jsx)(T.a,{md:"6",children:Object(F.jsxs)(R.a,{className:"mb-2",children:[Object(F.jsxs)(k.a,{for:"blog-edit-title",children:["Title ",Object(F.jsx)("span",{className:"text-danger",children:" * "})]}),Object(F.jsx)(P.a,{required:!0,id:"blog-edit-title",value:a,onChange:function(e){return b(e.target.value)}})]})}),Object(F.jsx)(T.a,{md:"6",children:Object(F.jsxs)(R.a,{className:"mb-2",children:[Object(F.jsxs)(k.a,{for:"blog-edit-category",children:["Cat\xe9gories ",Object(F.jsx)("span",{className:"text-danger",children:" * "})]}),Object(F.jsx)(v.a,{required:!0,id:"blog-edit-category",isClearable:!1,theme:h.g,value:O,isMulti:!0,name:"colors",options:M,className:"react-select",classNamePrefix:"select",onChange:function(e){return H(e)}})]})}),Object(F.jsx)(T.a,{md:"6",children:Object(F.jsxs)(R.a,{className:"mb-2",children:[Object(F.jsx)(k.a,{for:"blog-edit-slug",children:"Mots Cl\xe9s"}),Object(F.jsx)(P.a,{id:"blog-edit-slug",value:t,onChange:function(e){return c(e.target.value)}})]})}),Object(F.jsx)(T.a,{md:"6",children:Object(F.jsxs)(R.a,{className:"mb-2",children:[Object(F.jsxs)(k.a,{for:"blog-edit-status",children:["Statut ",Object(F.jsx)("span",{className:"text-danger",children:" * "})]}),Object(F.jsxs)(P.a,{required:!0,type:"select",id:"blog-edit-status",value:s,onChange:function(e){return u(e.target.value)},children:[Object(F.jsx)("option",{value:"true",children:"Publi\xe9"}),Object(F.jsx)("option",{value:"false",children:"Brouillon"})]})]})}),Object(F.jsx)(T.a,{sm:"12",children:Object(F.jsxs)(R.a,{className:"mb-2",children:[Object(F.jsxs)(k.a,{children:["Texte ",Object(F.jsx)("span",{className:"text-danger",children:" * "})]}),Object(F.jsx)(x.Editor,{editorState:r,toolbar:{fontFamily:{options:["Poppins","Montserrat","Helvetica","Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"]},colorPicker:{colors:["rgb(45,40,94)","rgb(0,0,0)","rgb(34,34,34)","rgb(204,204,204)","rgb(97,189,109)","rgb(184,49,47)","rgb(44,130,201)","rgb(26,188,156)","rgb(84,172,210)","rgb(147,101,184)","rgb(71,85,119)","rgb(65,168,95)","rgb(0,168,133)","rgb(61,142,185)","rgb(41,105,176)","rgb(85,57,130)","rgb(40,50,78)","rgb(247,218,100)","rgb(251,160,38)","rgb(235,107,86)","rgb(226,80,65)","rgb(163,143,132)","rgb(239,239,239)","rgb(255,255,255)","rgb(250,197,28)","rgb(243,121,52)","rgb(209,72,65)","rgb(124,112,107)","rgb(209,213,216)"]}},onEditorStateChange:function(e){return j(e)},handlePastedText:function(){return!1}})]})}),Object(F.jsx)(T.a,{className:"mb-2",sm:"12",children:Object(F.jsxs)("div",{className:"border rounded p-2",children:[Object(F.jsxs)("h5",{className:"mb-1",children:["Image ",Object(F.jsx)("span",{className:"text-danger",children:" * "})]}),Object(F.jsxs)(E.a,{className:"flex-column flex-md-row",children:[g&&Object(F.jsx)("img",{className:"rounded border img-fluid mr-2 mb-1 mb-md-0",src:g,alt:"featured img",maxheight:"110",width:"250",style:{objectFit:"contain"}}),Object(F.jsxs)(E.a,{body:!0,children:[Object(F.jsx)("div",{children:Object(F.jsx)("small",{className:"text-muted",children:"R\xe9solution minimale de l'image 500x300, taille maximale de l'image 1 mb."})}),Object(F.jsx)("div",{className:"d-inline-block mt-1",style:{overflow:"hidden"},children:Object(F.jsx)(R.a,{className:"mb-0",children:Object(F.jsx)(I.a,{type:"file",id:"featured-img",onChange:A,placeholder:"Choisir une image",accept:".jpg, .png, .jpeg, .webp"},o)})}),(null===m||void 0===m?void 0:m.invalidImg)&&Object(F.jsx)("div",{children:Object(F.jsx)("small",{className:"text-danger",children:m.invalidImg})})]})]})]})}),Object(F.jsxs)(T.a,{className:"mt-50",children:[Object(F.jsx)(z.a.Ripple,{className:"mb-1 mr-1",type:"submit",color:"primary",disabled:D||!!m,children:D?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(B.a,{size:"sm",color:"white"}),Object(F.jsx)("span",{className:"ml-50",children:"Sauvegarde..."})]}):"Sauvegarder"}),L&&Object(F.jsx)(z.a.Ripple,{className:"mb-1 mr-1",type:"button",color:"warning",disabled:D||!!m,onClick:U,children:"R\xe9initialiser"}),L&&Object(F.jsx)(z.a.Ripple,{className:"mb-1 mr-1",type:"button",color:"danger",disabled:D||!!m,onClick:function(){l(q(L)),n.goBack()},children:"Supprimer"}),Object(F.jsx)(z.a.Ripple,{color:"secondary",className:"mb-1 mr-1",type:"button",outline:!0,disabled:D||!!m,onClick:function(){return n.goBack()},children:"Retour"})]})]})})]})})},A=a(61),D=a(62);t.default=function(){var e=Object(l.b)(),t=Object(n.g)(),a=Object(l.c)((function(e){return e.blog})),b=a.selectedPost,j=a.postCategories,x=Object(l.c)((function(e){return e.auth.userData})),v=Object(l.c)((function(e){return e.errors.addPost})),p=d.EditorState.createEmpty(),f=[],N=!0;b&&(N=null===b||void 0===b?void 0:b.status,p=function(e){var t=u()(e),a=d.ContentState.createFromBlockArray(t.contentBlocks);return d.EditorState.createWithContent(a)}(b.htmlText),f=b.categories.map((function(e){return j.find((function(t){return e==t.value}))})));var C=Object(i.useState)(p),w=Object(r.a)(C,2),y=w[0],S=w[1],T=Object(i.useState)(f),R=Object(r.a)(T,2),k=R[0],P=R[1],E=Object(i.useState)((null===b||void 0===b?void 0:b.title)||""),I=Object(r.a)(E,2),z=I[0],B=I[1],M=Object(i.useState)((null===b||void 0===b?void 0:b.slug)||""),U=Object(r.a)(M,2),q=U[0],H=U[1],J=Object(i.useState)(N),G=Object(r.a)(J,2),V=G[0],W=G[1],_=Object(i.useState)(""),K=Object(r.a)(_,2),Q=K[0],X=K[1],Y=Object(i.useState)((null===b||void 0===b?void 0:b.image)||""),Z=Object(r.a)(Y,2),$=Z[0],ee=Z[1],te=Object(i.useState)(1),ae=Object(r.a)(te,2),se=ae[0],ce=ae[1],re=Object(i.useState)(!1),ie=Object(r.a)(re,2),ne=ie[0],le=ie[1],oe=Object(i.useState)(null),de=Object(r.a)(oe,2),be=de[0],ue=de[1];Object(i.useEffect)((function(){return function(){return e(Object(o.g)())}}),[]),Object(i.useEffect)((function(){v&&(ue({message:v[0].msg}),setTimeout((function(){ue(null)}),3e3),e({type:"CLEAR_ERRORS",data:"addPost"}))}),[v]);var je=function(){var t=Object(c.a)(Object(s.a)().mark((function t(a){var c,r,i,n,l,u,j,v;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(le(!0),a.preventDefault(),z&&k.length&&(Q||b)&&y.getCurrentContent().hasText()||(le(!1),ue({message:"Remplissez tous les champs obligatoires marqu\xe9s avec (*)!"}),setTimeout((function(){ue(null)}),3500),0)){t.next=4;break}return t.abrupt("return");case 4:return c=m()(Object(d.convertToRaw)(y.getCurrentContent())),r=y.getCurrentContent().getPlainText(),(i={title:Object(h.a)(z),status:V,htmlText:c,text:r}).slug=q?Object(h.i)(q):Object(h.i)(z),i.author=x.id,i.authorUsername=x.username,i.categories=k.map((function(e){return e.value})),n=null,l=o.a,b&&(n=b.id,l=o.k),(u=Object(O.serialize)(i)).append("img",Q||b.image),t.next=18,e(l(u,n)).then((function(e){return le(!1),e}));case 18:j=t.sent,v={type:"error",text:b?"La mise \xe0 jour du article a \xe9chou\xe9":"La cr\xe9ation d'un nouveau arcticle a \xe9chou\xe9"},j&&(v={type:"success",text:b?"Article modifi\xe9 avec succ\xe8s":"Nouveau article ajout\xe9 avec succ\xe8s"},b||(B(""),P([]),H(""),W(""),ee(""),X(""),ce(Date.now()),S(d.EditorState.createEmpty()))),g.c[v.type](Object(A.a)(v),{transition:g.a,hideProgressBar:!1,autoClose:3e3,pauseOnHover:!0});case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(F.jsxs)("div",{className:"blog-edit-wrapper",children:[Object(F.jsx)(D.a,{breadCrumbTitle:"Edition de l'article",breadCrumbParent:"Blog",breadCrumbActive:"Editer"}),Object(F.jsx)(L,{slug:q,title:z,status:V,setSlug:H,content:y,history:t,dispatch:e,resetImg:se,onSubmit:je,setTitle:B,setStatus:W,setContent:S,formErrors:be,previewImg:$,categories:k,selectedPost:b,onFileChange:function(e){var t=e.target.files[0];if(t){var a=Object(h.d)(t);if(a)return ue({invalidImg:a}),ce(Date.now()),ee((null===b||void 0===b?void 0:b.image)||""),void setTimeout((function(){ue(null)}),3e3);var r=new Image;r.src=URL.createObjectURL(t),r.onload=Object(c.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.width<500||this.height<300?(ue({invalidImg:"Largeur ou hauteur d'image invalide"}),ce(Date.now()),ee((null===b||void 0===b?void 0:b.image)||""),setTimeout((function(){ue(null)}),3e3)):(X(t),ee(URL.createObjectURL(t)));case 1:case"end":return e.stop()}}),e,this)})))}else ee("")},isSubmitting:ne,postCategories:j,handleFormReset:function(){S(p),P(f),B((null===b||void 0===b?void 0:b.title)||""),H((null===b||void 0===b?void 0:b.slug)||""),W(null===b||void 0===b?void 0:b.status),X(""),ee((null===b||void 0===b?void 0:b.image)||""),ce(Date.now())},setPostToManage:o.j,setBlogCategories:P})]})}},61:function(e,t,a){"use strict";var s=a(1),c=a(63),r=a(175),i=a(417),n=a(3);t.a=function(e,t){var a;switch(e.type){case"success":a="success";break;case"error":case"danger":a="danger";break;default:a="warning"}return Object(n.jsx)(s.Fragment,{children:Object(n.jsx)("div",{className:"toastify-header",children:Object(n.jsxs)("div",{className:"title-wrapper",children:[Object(n.jsx)(c.a,{size:"sm",color:a,icon:"success"===e.type?Object(n.jsx)(r.a,{size:12}):Object(n.jsx)(i.a,{size:12})}),Object(n.jsxs)("div",{style:{maxHeight:"350px",overflow:"auto"},children:[Object(n.jsx)("h6",{className:"toast-title font-weight-bold text-center",children:e.text}),t&&e.value&&t(e.value)]})]})})})}},62:function(e,t,a){"use strict";var s=a(54),c=a(536),r=a(537),i=a(3);t.a=function(e){var t=e.breadCrumbTitle,a=e.breadCrumbParent,n=e.breadCrumbParent2,l=e.breadCrumbParent3,o=e.breadCrumbActive;return Object(i.jsx)("div",{className:"content-header row",children:Object(i.jsx)("div",{className:"content-header-left col-md-9 col-12 mb-2",children:Object(i.jsx)("div",{className:"row breadcrumbs-top",children:Object(i.jsxs)("div",{className:"col-12",children:[t?Object(i.jsx)("h2",{className:"content-header-title float-left mb-0",children:t}):"",Object(i.jsx)("div",{className:"breadcrumb-wrapper vs-breadcrumbs d-sm-block d-none col-12",children:Object(i.jsxs)(c.a,{children:[Object(i.jsx)(r.a,{tag:"li",children:Object(i.jsx)(s.b,{to:"/",children:"Acceuil"})}),a&&Object(i.jsx)(r.a,{tag:"li",className:"text-primary",children:a}),n&&Object(i.jsx)(r.a,{tag:"li",className:"text-primary",children:n}),l&&Object(i.jsx)(r.a,{tag:"li",className:"text-primary",children:l}),Object(i.jsx)(r.a,{tag:"li",active:!0,children:o})]})})]})})})})}}}]);
//# sourceMappingURL=9.43198132.chunk.js.map