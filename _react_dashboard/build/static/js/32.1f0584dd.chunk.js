(this["webpackJsonpmodaz-shop"]=this["webpackJsonpmodaz-shop"]||[]).push([[32],{1134:function(e,t,a){"use strict";a.r(t);var s=a(55),r=a(56),n=a(7),c=a(1),i=a(75),l=a(54),o=a(19),d=a(192),m=a(83),u=a(105),j=a(116),b=j.d().shape({password:j.f().trim().matches(/(?=.*[0-9])/,"Doit contenir un chiffre").matches(/(?=.*[A-Z])/,"Doit contenir une lettre majuscule").matches(/(?=.*[a-z])/,"Doit contenir une lettre minuscule").min(8,"Mot de passe trop court (minimum 8)"),passwordConfirmation:j.f().trim().oneOf([j.e("password")],"Les mots de passe ne correspondent pas")}),p=a(23),O=a(10),f=a.n(O),x=a(158),h=a(61),g=a(106),v=a(585),w=a(356),N=a(172),k=a(173),y=a(145),R=a(202),C=a(231),S=a(51),z=a(203),D=a(539),E=a(1097),T=a(321),P=(a(359),a(3));t.default=function(){var e,t,j=Object(i.g)(),O=Object(x.a)(),L=Object(n.a)(O,1)[0],V=Object(o.b)(),q=Object(o.c)((function(e){return e.errors.login})),A=Object(c.useState)(""),B=Object(n.a)(A,2),F=B[0],H=B[1],J=Object(c.useState)(!1),M=Object(n.a)(J,2),Z=M[0],_=M[1],G=Object(c.useState)(!0),I=Object(n.a)(G,2),K=I[0],Q=I[1],U=Object(c.useState)(!1),W=Object(n.a)(U,2),X=W[0],Y=W[1],$=Object(m.c)({mode:"onBlur",defaultValues:{},resolver:Object(u.yupResolver)(b)}),ee=$.register,te=$.errors,ae=$.handleSubmit,se=$.setError,re=Object(i.i)().token,ne="dark"===L?"reset-password-v2-dark.svg":"reset-password-v2.svg",ce=a(586)("./".concat(ne)).default;Object(c.useEffect)(Object(r.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(Object(d.f)(re)).then((function(e){return e}));case 2:t=e.sent,Q(!1),t.invalidToken?j.replace("/"):t.expiredToken?Y(t.expiredToken):H(t.email);case 5:case"end":return e.stop()}}),e)}))),[]),Object(c.useEffect)((function(){q&&(q.forEach((function(e){se(e.param,{type:"manual",message:e.msg})})),V({type:"CLEAR_ERRORS",data:"login"}))}),[q]);var ie=function(){var e=Object(r.a)(Object(s.a)().mark((function e(t){var a,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),t.token=re,t.email=F,e.next=5,V(Object(d.e)(t)).then((function(e){return e}));case 5:if(a=e.sent,_(!1),null===a||void 0===a||!a.invalidToken){e.next=11;break}return e.abrupt("return",j.replace("/"));case 11:if(null===a||void 0===a||!a.expiredToken){e.next=13;break}return e.abrupt("return",Y(a.expiredToken));case 13:if(a){e.next=15;break}return e.abrupt("return");case 15:r={type:"success",text:"Le mot de passe a \xe9t\xe9 r\xe9initialis\xe9 avec succ\xe8s !"},p.c[r.type](Object(h.a)(r),{transition:p.a,hideProgressBar:!1,autoClose:5e3,pauseOnHover:!0}),j.replace("/");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsx)("div",{className:"auth-wrapper auth-v2",children:Object(P.jsxs)(N.a,{className:"auth-inner m-0",children:[Object(P.jsx)(l.b,{className:"brand-logo",to:"/",onClick:function(e){return e.preventDefault()},children:Object(P.jsx)("img",{src:v.a,className:"img-fluid",alt:"logo",style:{maxHeight:"50px"}})}),Object(P.jsx)(k.a,{className:"d-none d-lg-flex align-items-center p-5",lg:"8",sm:"12",children:Object(P.jsx)("div",{className:"w-100 d-lg-flex align-items-center justify-content-center px-5",children:Object(P.jsx)("img",{className:"img-fluid",src:ce,alt:"Login V2"})})}),Object(P.jsx)(k.a,{className:"d-flex align-items-center auth-bg px-2 p-lg-5",lg:"4",sm:"12",children:K?Object(P.jsxs)(k.a,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[Object(P.jsx)(y.a,{tag:"h2",className:"font-weight-bold mb-1",children:"Demande de r\xe9initialisation du mot de passe..."}),Object(P.jsx)(R.a,{className:"mx-auto",size:"lg",color:"primary"})]}):X?Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:"Demande de r\xe9initialisation du mot de passe \ud83d\udd12"}),Object(P.jsx)(C.a,{color:"danger mt-2",children:Object(P.jsx)("div",{className:"alert-body",children:X})}),Object(P.jsxs)(S.a.Ripple,{color:"primary",block:!0,tag:l.b,to:"/",children:[Object(P.jsx)(w.a,{className:"mr-25",size:14}),Object(P.jsx)("span",{className:"align-middle",children:"Retour \xe0 la page de connexion"})]})]}):Object(P.jsxs)(k.a,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[Object(P.jsx)(y.a,{tag:"h2",className:"font-weight-bold mb-1",children:"R\xe9initialiser le mot de passe \ud83d\udd12"}),Object(P.jsx)(z.a,{className:"mb-2",children:"Votre nouveau mot de passe doit \xeatre diff\xe9rent de l'ancien"}),Object(P.jsxs)(D.a,{className:"auth-reset-password-form mt-2",onSubmit:ae(ie),children:[Object(P.jsxs)(E.a,{children:[Object(P.jsx)(T.a,{className:"form-label",for:"reset-pwd",children:"Nouveau mot de passe"}),Object(P.jsx)(g.a,{id:"reset-pwd",autoFocus:!0,name:"password",innerRef:ee,required:!0,className:f()("input-group-merge",{"is-invalid":te.password})}),Object(P.jsx)("div",{className:"invalid-feedback",children:null===(e=te.password)||void 0===e?void 0:e.message})]}),Object(P.jsxs)(E.a,{children:[Object(P.jsx)(T.a,{className:"form-label",for:"confirm-reset-pwd",children:"Confirmer le mot de passe"}),Object(P.jsx)(g.a,{id:"confirm-reset-pwd",name:"passwordConfirmation",innerRef:ee,required:!0,className:f()("input-group-merge",{"is-invalid":te.passwordConfirmation})}),Object(P.jsx)("div",{className:"invalid-feedback",children:null===(t=te.passwordConfirmation)||void 0===t?void 0:t.message})]}),Object(P.jsx)(S.a.Ripple,{color:"primary",disabled:Z,type:"submit ",block:!0,children:Z?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(R.a,{color:"white"}),Object(P.jsx)("span",{className:"ml-50",children:"Soumission..."})]}):"Valider"})]}),Object(P.jsx)("p",{className:"text-center mt-2",children:Object(P.jsxs)(l.b,{to:"/",children:[Object(P.jsx)(w.a,{className:"mr-25",size:14}),Object(P.jsx)("span",{className:"align-middle",children:"Retour \xe0 la page de connexion"})]})})]})})]})})}},150:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}}]);
//# sourceMappingURL=32.1f0584dd.chunk.js.map